---
import { supabase } from "@/lib/supabase";
import type { Place } from "@/types/index";
import BaseLayout from "@/layouts/BaseLayout.astro";

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect("/404");
}

const { data: place, error } = await supabase
  .from("places")
  .select("*")
  .eq("slug", slug)
  .single();

if (error || !place) {
  return Astro.redirect("/404");
}

const pageTitle = `${place.name} - ${place.district || place.city}`;
const pageDescription =
  place.description_en ||
  place.description_tr ||
  `${place.name} - ${place.address}`;
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  image={place.image_urls?.[0]}
  locale="en"
>
  <!-- Same structure as Turkish version but with English text -->
</BaseLayout>
