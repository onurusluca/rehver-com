---
import PlacePage from "@/components/pages/PlacePage.astro";
import { supabaseServer } from "@/utils/supabase";
import type { GetStaticPaths } from "astro";

export const getStaticPaths: GetStaticPaths = async () => {
  const { data: places } = await supabaseServer
    .from("places")
    .select("slug")
    .not("slug", "is", null);

  return (
    places
      ?.filter((place) => place.slug)
      .map((place) => ({
        params: { slug: place.slug as string },
      })) || []
  );
};

const slug = Astro.params.slug as string;
---

<PlacePage locale="en" slug={slug} />
